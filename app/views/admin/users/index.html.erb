<h1 class="standard-top-offset mb-4">Admin users</h1>
<%= render partial: "/shared/current_header", locals: {collection: @users, render_period_select: true} %>
<% skip_sortable ||= false %>
<div class="full-screen-table">
  <table class="table table-sm">
    <thead class="sortable">
      <tr>
        <th>
          <%= sortable "created_at", skip_sortable: skip_sortable %>
        </th>
        <th>
          <small><%= sortable "updated_at", skip_sortable: skip_sortable %></small>
        </th>
        <th>
          <%= sortable "username", skip_sortable: skip_sortable %>
        </th>
        <th>
          <small><%= sortable "email", skip_sortable: skip_sortable %></small>
        </th>
        <th>Reviews</th>
        <th>
          <small title="Account Private?">P<span class="hidden md:inline">rivate</span></small>
        </th>
        <th><small>Followers</small></th>
        <th>Roles</th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <tr>
          <td>
            <% if display_dev_info? %><code class="only-dev-visible-small"><%= user.id %></code><% end %>
            <span class="convertTime"><%= l(user.created_at, format: :convert_time) %></span>
          </td>
          <td>
            <small class="convertTime"><%= l(user.updated_at, format: :convert_time) %></small>
          </td>
          <td>
            <%= link_to user&.username, reviews_path(sortable_search_params.merge(user: user.username)) %>
          </td>
          <td>
            <small><%= user.email %></small>
          </td>
          <td><%= admin_number_display(user.reviews.count) %></td>
          <td class="table-cell-check">
            <%= check_mark if user.account_private %>
          </td>
          <td>
            <%= link_to admin_number_display(user.followers_approved.count), followers_u_path(id: user.to_param) %>
          </td>
          <td>
            <% unless user.normal_user? %>
              <%= user.role %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
