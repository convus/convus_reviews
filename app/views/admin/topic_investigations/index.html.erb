<h1 class="standard-top-offset mb-2">Admin Topic investigations</h1>
<p class="mb-4"><%= link_to "New investigation", new_admin_topic_investigation_path, class: "link-primary" %></p>
<%= render partial: "/shared/current_header", locals: {collection: @topic_investigations, render_period_select: true} %>
<% skip_sortable ||= false %>
<div class="full-screen-table">
  <table class="table table-sm">
    <thead class="sortable">
      <tr>
        <th>
          <%= sortable "created_at", skip_sortable: skip_sortable %>
        </th>
        <th>
          <small><%= sortable "updated_at", skip_sortable: skip_sortable %></small>
        </th>
        <th>
          <%= sortable "topic_name", skip_sortable: skip_sortable %>
        </th>
        <th>
          Status
        </th>
        <th>
          <%= sortable "start_at", skip_sortable: skip_sortable %>
        </th>
        <th>
          <%= sortable "end_at", skip_sortable: skip_sortable %>
        </th>
        <th>Votes</th>
      </tr>
    </thead>
    <tbody>
      <% @topic_investigations.each do |topic_investigation| %>
        <tr>
          <td>
            <% if display_dev_info? %><code class="only-dev-visible-small"><%= topic_investigation.id %></code><% end %>
            <%= link_to l(topic_investigation.created_at, format: :convert_time), edit_admin_topic_investigation_path(topic_investigation), class: "convertTime" %>
          </td>
          <td>
            <small class="convertTime"><%= l(topic_investigation.updated_at, format: :convert_time) %></small>
          </td>
          <td>
            <%= link_to topic_investigation.topic_name, edit_admin_topic_path(topic_investigation.topic_name) %>
          </td>
          <td>
            <%= topic_investigation.status %>
          </td>
          <td>
            <% if topic_investigation.start_at.present? %>
              <span class="convertTime"><%= l(topic_investigation.start_at, format: :convert_time) %></span>
            <% end %>
          </td>
          <td>
            <% if topic_investigation.end_at.present? %>
              <span class="convertTime"><%= l(topic_investigation.end_at, format: :convert_time) %></span>
            <% end %>
          </td>
          <td>
            <%= link_to admin_number_display(topic_investigation.topic_investigation_votes.count), reviews_path(search_topics: topic_investigation.topic_name) %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

